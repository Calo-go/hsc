(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31be26c5"],{"13d5":function(e,t,n){"use strict";var r=n("23e7"),a=n("d58f").left,o=n("a640"),s=n("ae40"),i=o("reduce"),c=s("reduce",{1:0});r({target:"Array",proto:!0,forced:!i||!c},{reduce:function(e){return a(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"18a5":function(e,t,n){},"1aba":function(e,t,n){},3521:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"standard-table"},[n("div",{staticClass:"alert"},[e.selectedRows?n("a-alert",{attrs:{type:"info","show-icon":!0}},[n("div",{staticClass:"message",attrs:{slot:"message"},slot:"message"},[e._v(" 已选择 "),n("a",[e._v(e._s(e.selectedRows.length))]),e._v(" 项 "),n("a",{staticClass:"clear",on:{click:e.onClear}},[e._v("清空")]),e._l(e.needTotalList,(function(t,r){return[t.needTotal?n("div",{key:r},[e._v(" "+e._s(t.title)+"总计 "),n("a",[e._v(e._s(t.customRender?t.customRender(t.total):t.total))])]):e._e()]}))],2)]):e._e()],1),n("a-table",{attrs:{bordered:e.bordered,loading:e.loading,columns:e.storedColumns,dataSource:e.dataSource,rowKey:e.rowKey,pagination:e.pagination,expandedRowKeys:e.expandedRowKeys,expandedRowRender:e.expandedRowRender,expandIconColumnIndex:e.expandIconColumnIndex,expandIcon:e.expandIcon,expandIconAsCell:e.expandIconAsCell,rowSelection:e.selectedRows?{selectedRowKeys:e.selectedRowKeys,onChange:e.updateSelect}:void 0,customRow:e.onRowClick},on:{change:e.onChange,expand:e.onExpand,expandedRowsChange:e.expandedRowsChange},scopedSlots:e._u([e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(n,r,a){return[e._t(t,null,null,{text:n,record:r,index:a})]}}})),{key:e.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(t,n,r,a){return[e._t(e.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:t,index:n,indent:r,expanded:a})]}}],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return n("template",{slot:t},[e._t(t)],2)}))],2)],1)},a=[],o=n("7644"),s=o["a"],i=(n("7a06"),n("0c7c")),c=Object(i["a"])(s,r,a,!1,null,"c7573784",null);t["a"]=c.exports},"4ec9":function(e,t,n){"use strict";var r=n("6d61"),a=n("6566");e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},7644:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("13d5"),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_3__),_home_runner_work_roo_roo_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("5530");__webpack_exports__["a"]={name:"StandardTable",props:{bordered:Boolean,loading:[Boolean,Object],columns:Array,dataSource:Array,rowKey:{type:[String,Function],default:"key"},pagination:{type:[Object,Boolean],default:!0},expandIconColumnIndex:Number,selectedRows:Array,expandedRowKeys:Array,expandedRowRender:Function,expandIcon:Function,expandIconAsCell:Boolean},data:function(){return{needTotalList:[],storedColumns:this.columns}},methods:{updateSelect:function(e,t){this.$emit("update:selectedRows",t),this.$emit("selectedRowChange",e,t)},initTotalList:function(e){var t=e.filter((function(e){return e.needTotal})).map((function(e){return Object(_home_runner_work_roo_roo_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__["a"])(Object(_home_runner_work_roo_roo_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__["a"])({},e),{},{total:0})}));return t},onClear:function(){this.updateSelect([],[]),this.$emit("clear")},onChange:function(e,t,n,r){var a=r.currentDataSource;this.$emit("change",e,t,n,{currentDataSource:a})},onExpand:function(e,t){this.$emit("expand",e,t)},expandedRowsChange:function(e){this.$emit("expandedRowsChange",e)},onRowClick:function(e,t){var n=this;return{on:{click:function(){n.$emit("click",e,t)},dblclick:function(){n.$emit("dblclick",e,t)}}}}},created:function(){this.storedColumns=this.storedColumns.filter((function(e){return!(!1===e.visible)})),this.needTotalList=this.initTotalList(this.storedColumns)},watch:{selectedRows:function selectedRows(_selectedRows){this.needTotalList=this.needTotalList.map((function(item){return Object(_home_runner_work_roo_roo_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__["a"])(Object(_home_runner_work_roo_roo_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__["a"])({},item),{},{total:_selectedRows.reduce((function(sum,val){var v;try{v=val[item.dataIndex]?val[item.dataIndex]:eval("val.".concat(item.dataIndex))}catch(_){v=val[item.dataIndex]}return v=isNaN(parseFloat(v))?0:parseFloat(v),sum+v}),0)})}))}},computed:{selectedRowKeys:function(){var e=this;return this.selectedRows.map((function(t){return"function"===typeof e.rowKey?e.rowKey(t):t[e.rowKey]}))}}}},"7a06":function(e,t,n){"use strict";var r=n("1aba"),a=n.n(r);a.a},"89a6":function(e,t){e.exports={messages:{CN:{errorMessage:{connectToWalletFirst:"请先连接钱包",failedToMortgage:"抵押失败:",failedToCancelMortgage:"取消抵押失败:",failedToActive:"启用失败：",invalidInputAmount:"输入金额非法",maximumDepositAmount:"最大存款金额为",depositFailed:"存款失败:",withdrawFailed:"取款失败:",loanFailed:"借款失败:",repaymentFailed:"还款失败:",transactionFailed:"交易失败，错误码:",errorInfo:"错误信息:"},depositList:{totalSupply:"存款总规模",totalBorrow:"借款总规模",connectToWallet:"连接到钱包",transactionProcessing:"交易处理中",transactionConfirming:"交易确认中",ok:"确认",cancel:"取消",close:"关闭",detail:"概览",person:{text:"我的持仓",symbol:"币种",deposit:"存款余额",supplyAPY:"存款利率",balanceOfBorrow:{text:"借款余额",filter:{text:"我的借款"}},borrowRate:"借款利率",options:{text:"操作",depositAndDraw:"存取",debit:"借贷"},collateral:"抵押"},markets:{text:"市场",symbol:"币种",totalSupply:"存款规模",supplyAPY:"存款利率",totalBorrow:{text:"借款规模",filter:{text:"市场"}},borrowRate:"借款利率",options:{text:"操作",depositAndDraw:"存取",debit:"借贷"},collateral:"抵押"}},liquidation:{liquidationPool:"清算池",borrowingLimit:"借款额",assetName:"质押资产",assetSupply:"质押额度",risk:"风险值",liquidate:"清算"}},US:{errorMessage:{connectToWalletFirst:"Please connect to wallet at first",failedToMortgage:"Failed to mortgage:",failedToCancelMortgage:"Failed to cancel mortgage:",failedToActive:"Failed to active:",invalidInputAmount:"Illegal amount entered",maximumDepositAmount:"The maximum deposit amount is",depositFailed:"Deposit failed:",withdrawFailed:"Withdraw failed:",loanFailed:"Loan failed:",repaymentFailed:"Repayment failed:",transactionFailed:"Transaction failed, error code:",errorInfo:"error information:"},depositList:{totalSupply:"Total Supply",totalBorrow:"Total Borrow",connectToWallet:"Connect to wallet",transactionProcessing:"Transaction processing",close:"close",detail:"Detail",ok:"Ok",cancel:"Cancel",person:{text:"My Position",symbol:"Symbol",deposit:"Deposit",supplyAPY:"Supply APY",balanceOfBorrow:{text:"Balance Of Borrow",filter:{text:"My Borrow"}},borrowRate:"Borrow Rate",options:{text:"Options",depositAndDraw:"Deposit/Draw",debit:"Debit"},collateral:"Collateral"},markets:{text:"Markets",symbol:"Symbol",totalSupply:"Total Supply",supplyAPY:"Total Supply APY",totalBorrow:{text:"Total Borrow",filter:{text:"Markets"}},borrowRate:"Borrow Rate",options:{text:"Options",depositAndDraw:"Deposit/Draw",debit:"Debit"},collateral:"Collateral"}},liquidation:{liquidationPool:"Liquidation Pool",borrowingLimit:"Borrowing Limit",assetName:"Asset Name",assetSupply:"Asset Supply",risk:"Risk",liquidate:"Liquidate"}},HK:{depositList:{},liquidation:{}}}}},a999:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",[0==e.liqs.length?n("a-card",{staticStyle:{"border-radius":"10px"},attrs:{title:"清算池(0个仓位)",bordered:!1,headStyle:{"font-size":"18px"},bodyStyle:{"font-size":"16px"}}},[n("p",{staticStyle:{"text-align":"center"}},[e._v("暂无清算池列表")])]):n("div"),n("standard-table",{staticClass:"components-table-demo-nested",attrs:{columns:e.columns,"data-source":e.liqs,pagination:!(e.liqs.length<10),expandedRowKeys:e.expandedRowKeys,expandIconColumnIndex:4,expandIcon:function(e){return null},rowKey:function(e){return e.key},expandIconAsCell:!1},on:{expand:e.onExpand,expandedRowsChange:e.expandedRowsChange},scopedSlots:e._u([{key:"account",fn:function(t){t.text;var r=t.record;return n("div",{},[e._v(" "+e._s(r.account.substring(0,6)+"..."+r.account.substring(38))+" ")])}},{key:"totalBorrowUSDT",fn:function(t){t.text;var r=t.record;return n("div",{},[e._v(" $"+e._s(parseFloat(r.totalBorrowUSDT).toFixed(2))+" ")])}},{key:"totalSupplyUSDT",fn:function(t){t.text;var r=t.record;return n("div",{},[e._v(" $"+e._s(parseFloat(r.totalSupplyUSDT).toFixed(2))+" ")])}},{key:"risk",fn:function(e){e.text;var t=e.record;return n("div",{},[n("div",{staticClass:"line-element"},[n("b",[n("a-progress",{attrs:{strokeColor:t.risk<60?"green":t.risk<=86?"blue":"red",percent:parseFloat(t.risk.toFixed(1)),status:"active",showInfo:!0}})],1)])])}},{key:"operation",fn:function(t){t.text;var r=t.record;return n("div",{},[e.expandedRowKeys.length<1&&r.key===e.curRecord.key&&!e.liqsMap.has(r.key)?n("a-icon",{attrs:{type:"loading"}}):n("a",{on:{click:function(t){return e.handleExpand(r)}}},[e._v("详情")])],1)}},{key:"expandedRowRender",fn:function(t){return n("standard-table",{attrs:{columns:e.innerColumns,"data-source":e.liqsMap.get(t.record.key),pagination:!1},scopedSlots:e._u([{key:"name",fn:function(t){t.text;var r=t.record;return n("div",{},[n("div",{staticClass:"line-element"},[n("a-avatar",{attrs:{slot:"avatar",size:"large",shape:"square",src:r.base64},slot:"avatar"}),n("b",[n("span",[e._v(" "+e._s(r.name)+" ")])])],1)])}},{key:"borrow",fn:function(t){t.text;var r=t.record;return n("div",{},[n("div",{staticClass:"line-element"},[n("b",[e._v(" $"+e._s((r.borrowUSDT*r.assetSupplyUSDT/e.curRecord.totalSupplyUSDT).toFixed(8))+"/$"+e._s(r.borrowUSDT.toFixed(8))+" ")])]),n("div",{staticClass:"line-element"},[n("b",[e._v(" "+e._s(parseFloat(e.computBorrow(r)).toFixed(8))+"/"+e._s(parseFloat(r.borrow).toFixed(8))+" "+e._s(r.name)+" ")])])])}},{key:"assetSupply",fn:function(t){t.text;var r=t.record;return n("div",{},[n("div",{staticClass:"line-element"},[n("b",[e._v(" $"+e._s((r.assetSupplyUSDT*r.borrowUSDT/e.curRecord.totalBorrowUSDT).toFixed(8))+"/$"+e._s(r.assetSupplyUSDT)+" ")])]),n("div",[n("b",[e._v(" "+e._s(parseFloat(e.cToken2Underlying(r.assetSupply,r.assetDecimals,r.assetRate,r.assetUnderlyingDecimals)).toFixed(8))+" "+e._s(r.assetName)+" ")])])])}},{key:"operation",fn:function(t){t.text;var r=t.record;return n("span",{staticClass:"table-operation"},[n("a",{staticStyle:{"margin-right":"8px"},on:{click:function(t){return e.onLiquidate(t,r)}}},[n("a-button",{attrs:{type:"primary",shape:"round",size:"default",disabled:e.curRecord.risk<100}},[e._v(e._s(e.$t("liquidation.liquidate")))])],1)])}}])},[n("span",{staticClass:"table-operation"},[n("a",{staticStyle:{"margin-right":"8px"},on:{click:function(n){return e.onLiquidate(n,t)}}},[n("a-button",{attrs:{type:"primary",shape:"round",size:"default",disabled:t.record.risk<100}},[e._v(e._s(e.$t("liquidation.liquidate")))])],1)])])}}])}),n("a-modal",{attrs:{width:550,maskClosable:!0,closable:!0,footer:null},model:{value:e.bNeedEnable,callback:function(t){e.bNeedEnable=t},expression:"bNeedEnable"}},[n("a-card",{staticClass:"project-list",staticStyle:{"margin-bottom":"2px","text-align":"center"},attrs:{bordered:!1,"body-style":{padding:0}}},[n("div",[n("a-card",{attrs:{bordered:!1,"body-style":{padding:0}}},[n("div",{staticClass:"wallet"},[n("b",[e._v(" 要向复合协议提供或偿还"+e._s(e.innerCurRecord.name)+",您需要先启用它 ")])]),n("a-form-item",[n("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{size:"large",loading:e.btnLoading,type:"primary"},on:{click:e.approve}},[e._v("启用")])],1)],1)],1)])],1)],1)},a=[],o=(n("7db0"),n("c975"),n("a434"),n("b0c0"),n("4ec9"),n("b680"),n("d3b7"),n("ac1f"),n("25f0"),n("3ca3"),n("1276"),n("ddb0"),n("96cf"),n("1da1")),s=n("5530"),i=n("3521"),c=n("b775"),l=n("5880"),d=n("c030"),u=n("4d8a"),p="",_=[{title:"账户",key:"account",scopedSlots:{customRender:"account"}},{title:"借款额",key:"totalBorrowUSDT",scopedSlots:{customRender:"totalBorrowUSDT"}},{title:"抵押额",key:"totalSupplyUSDT",scopedSlots:{customRender:"totalSupplyUSDT"}},{title:"健康",key:"rate",scopedSlots:{customRender:"risk"}},{title:"操作",key:"operation",scopedSlots:{customRender:"operation"}}],m=[{title:"币种",key:"name",scopedSlots:{customRender:"name"}},{title:"借款额",key:"borrow",scopedSlots:{customRender:"borrow"}},{title:"质押额",key:"assetSupply",scopedSlots:{customRender:"assetSupply"}},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"operation"}}],b=[],f={name:"QueryList",components:{StandardTable:i["a"]},i18n:n("89a6"),data:function(){return{columns:_,innerColumns:m,liqs:[],liqsMap:new Map,innerData:b,expandedRowKeys:[],curRecord:[],innerCurRecord:[],advanced:!0,selectedRows:[],ModalText:"Content of the modal",visible:!1,confirmVisible:!1,confirmTitle:"交易确认",confirmLoading:!1,opType:"depOrRedeem",timer:"",bNeedEnable:!1,btnLoading:!1}},computed:Object(s["a"])(Object(s["a"])({},Object(l["mapState"])("coins",["coins","balance","signer","walletAddress","perBlockRate","liqArray","comptrollerErrorReporter","comptrollerFailureInfo","tokenErrorReporter","tokenFailureInfo"])),Object(l["mapGetters"])("coins",["comptrollerObj","dexPriceObj","tokenHelper"])),authorize:{deleteRecord:"delete"},watch:{confirmVisible:function(){this.confirmVisible||(this.confirmTitle="交易确认")},liqArray:function(){0!=this.liqArray.length&&clearInterval(this.timer)}},mounted:function(){this.getAccounts()},methods:{handleExpand:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.curRecord=e,t.liqsMap.has(e.key)){n.next=3;break}return n.delegateYield(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[],n.next=3,t.comptrollerObj.getAssetsIn(e.account);case 3:a=n.sent,o=regeneratorRuntime.mark((function n(o){var s,i,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=t.coins.find((function(e){return e.address.toLowerCase()==a[o].toLowerCase()})),!s){n.next=24;break}return i={},i["symbol"]=s.symbol,i["name"]=s.name,i["decimals"]=s.decimals,i["rate"]=s.rate,i["underlyingDecimals"]=s.underlyingDecimals,i["underlyingPrice"]=s.underlyingPrice,i["underlyingObj"]=s.underlyingObj,i["contractObj"]=s.contractObj,i["address"]=s.address,i["base64"]=s.BASE64,n.next=15,s.contractObj.balanceOf(e.account);case 15:return c=n.sent,i["balanceOf"]=d["a"].utils.formatUnits(c,s.decimals),i["balanceOfUSDT"]=parseFloat(t.underlying2USDT(t.cToken2Underlying(i.balanceOf,i.decimals,i.rate,i.underlyingDecimals),i.underlyingDecimals,i.underlyingPrice)),n.next=20,s.contractObj.borrowBalanceStored(e.account);case 20:l=n.sent,i["borrow"]=d["a"].utils.formatUnits(l,s.underlyingDecimals),i["borrowUSDT"]=parseFloat(t.underlying2USDT(i.borrow,i.underlyingDecimals,i.underlyingPrice)),r.push(i);case 24:case"end":return n.stop()}}),n)})),s=0;case 6:if(!(s<a.length)){n.next=11;break}return n.delegateYield(o(s),"t0",8);case 8:s++,n.next=6;break;case 11:t.generlLiqLists(e.account,r);case 12:case"end":return n.stop()}}),n)}))(),"t0",3);case 3:t.expandedRowKeys.length>0?(r=t.expandedRowKeys.indexOf(e.key),r>-1?t.expandedRowKeys.splice(r,1):(t.expandedRowKeys.splice(0,t.expandedRowKeys.length),t.expandedRowKeys.push(e.key))):t.expandedRowKeys.push(e.key);case 4:case"end":return n.stop()}}),n)})))()},computBorrow:function(e){return this.USDT2Underlying((e.borrowUSDT*e.assetSupplyUSDT/this.curRecord.totalSupplyUSDT).toFixed(e.underlyingDecimals),e.underlyingPrice,e.underlyingDecimals)},generlLiqLists:function(e,t){for(var n=[],r=0,a=0;a<t.length;a++)for(var o=0;o<t.length;o++){if(0==parseFloat(t[a].borrow))break;if(0!=parseFloat(t[o].balanceOf)){var s={};s["key"]=r++,s["account"]=e,s["name"]=t[a].name,s["symbol"]=t[a].symbol,s["decimals"]=t[a].decimals,s["rate"]=t[a].rate,s["underlyingDecimals"]=t[a].underlyingDecimals,s["underlyingPrice"]=t[a].underlyingPrice,s["address"]=t[a].address,s["base64"]=t[a].base64,s["balanceOf"]=t[a].balanceOf,s["borrow"]=t[a].borrow,s["borrowUSDT"]=t[a].borrowUSDT,s["underlyingObj"]=t[a].underlyingObj,s["contractObj"]=t[a].contractObj,s["assetName"]=t[o].name,s["assetRate"]=t[o].rate,s["assetDecimals"]=t[o].decimals,s["assetAddress"]=t[o].address,s["assetUnderlyingPrice"]=t[o].underlyingPrice,s["assetSupply"]=t[o].balanceOf,s["assetSupplyUSDT"]=t[o].balanceOfUSDT,n.push(s)}}this.liqsMap.set(e,n)},expandedRowsChange:function(e){},onExpand:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.curRecord=t,!e){r.next=4;break}if(n.liqsMap.has(t.key)){r.next=4;break}return r.delegateYield(regeneratorRuntime.mark((function e(){var r,a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],e.next=3,n.comptrollerObj.getAssetsIn(t.account);case 3:a=e.sent,o=regeneratorRuntime.mark((function e(o){var s,i,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=n.coins.find((function(e){return e.address.toLowerCase()==a[o].toLowerCase()})),!s){e.next=24;break}return i={},i["name"]=s.name,i["symbol"]=s.symbol,i["decimals"]=s.decimals,i["rate"]=s.rate,i["underlyingDecimals"]=s.underlyingDecimals,i["underlyingPrice"]=s.underlyingPrice,i["underlyingObj"]=s.underlyingObj,i["contractObj"]=s.contractObj,i["address"]=s.address,i["base64"]=s.BASE64,e.next=15,s.contractObj.balanceOf(t.account);case 15:return c=e.sent,i["balanceOf"]=d["a"].utils.formatUnits(c,s.decimals),i["balanceOfUSDT"]=parseFloat(n.underlying2USDT(n.cToken2Underlying(i.balanceOf,i.decimals,i.rate,i.underlyingDecimals),i.underlyingDecimals,i.underlyingPrice)),e.next=20,s.contractObj.borrowBalanceStored(t.account);case 20:l=e.sent,i["borrow"]=d["a"].utils.formatUnits(l,s.underlyingDecimals),i["borrowUSDT"]=parseFloat(n.underlying2USDT(i.borrow,i.underlyingDecimals,i.underlyingPrice)),r.push(i);case 24:case"end":return e.stop()}}),e)})),s=0;case 6:if(!(s<a.length)){e.next=11;break}return e.delegateYield(o(s),"t0",8);case 8:s++,e.next=6;break;case 11:n.generlLiqLists(t.account,r);case 12:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:n.expandedRowKeys.length>0?(a=n.expandedRowKeys.indexOf(t.key),a>-1?n.expandedRowKeys.splice(a,1):(n.expandedRowKeys.splice(0,n.expandedRowKeys.length),n.expandedRowKeys.push(t.key))):n.expandedRowKeys.push(t.key);case 5:case"end":return r.stop()}}),r)})))()},getAccounts:function(){var e=this;Object(c["e"])("".concat(p,"/accounts"),c["a"].GET).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var r,a,o,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=n.data.liquidations,null!=r){t.next=3;break}return t.abrupt("return");case 3:e.liqs=[],a=0;case 5:if(!(a<r.length)){t.next=23;break}return o={},o["key"]=r[a],o["account"]=r[a],t.next=11,e.comptrollerObj.getAccountSumCollateralAndBorrow(r[a],"0x0000000000000000000000000000000000000000",0,0);case 11:return s=t.sent,"0"==s[2]?o["risk"]=0:o["risk"]=100*parseFloat(Object(u["formatEther"])(Object(u["parseUnits"])(s[2].toString(),18).div(s[1]))),o["totalBorrowUSDT"]=parseFloat(Object(u["formatUnits"])(s[2],10)),o["coins"]=[],t.next=17,e.tokenHelper.getTotalAssert(r[a]);case 17:i=t.sent,o["totalSupplyUSDT"]=parseFloat(Object(u["formatUnits"])(i[1],10)),e.liqs.push(o);case 20:a++,t.next=5;break;case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},approve:function(){var e=this;this.btnLoading=!0,this.innerCurRecord.underlyingObj.approve(this.innerCurRecord.address,d["a"].constants.MaxUint256).then((function(e){})).catch((function(t){e.$message.error(e.$t("enableFailed")+t.message())})),this.innerCurRecord.underlyingObj.on("Approval",(function(t,n,r){"0"==r.toString()?e.bNeedEnable=!0:e.bNeedEnable=!1}))},onLiquidate:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==n.walletAddress){e.next=3;break}return n.$message.warning("请先连接钱包"),e.abrupt("return");case 3:if(n.innerCurRecord=t,"OKT"==t.name){e.next=14;break}return e.next=7,t.underlyingObj.allowance(n.walletAddress,t.address);case 7:if(r=e.sent,"0"!=r.toString()){e.next=13;break}return n.bNeedEnable=!0,e.abrupt("return");case 13:n.bNeedEnable=!1;case 14:"OKT"!=t.name?t.contractObj.liquidateBorrow(t.account,Object(u["parseUnits"])(n.computBorrow(t),t.underlyingDecimals),t.assetAddress).then((function(e){t.contractObj.on("Failure",(function(t,r,a,o){e.hash==o.transactionHash&&n.$message.error("清算失败:",n.tokenErrorReporter[t],n.tokenFailureInfo[r])}))})).catch((function(e){n.$message.error("清算失败:"+e.data.messages)})):t.contractObj.liquidateBorrow(t.account,t.assetAddress).then((function(e){t.contractObj.on("Failure",(function(t,r,a,o){e.hash==o.transactionHash&&n.$message.error("清算失败:",n.tokenErrorReporter[t],n.tokenFailureInfo[r])}))})).catch((function(e){n.$message.error("清算失败:"+e.data.message)})),t.contractObj.on("LiquidateBorrow",(function(e,t,r,a,o,s){n.getAccounts()}));case 16:case"end":return e.stop()}}),e)})))()},cToken2Underlying:function(e,t,n,r){if(0==e)return"0";var a=Object(u["formatUnits"])(Object(u["parseUnits"])(e,t).mul(n),r),o=d["a"].BigNumber.from(a.split(".")[0]);return Object(u["formatEther"])(o)},underlying2USDT:function(e,t,n){if(0==e)return"0";var r=10,a=Object(u["parseUnits"])(parseFloat(e).toFixed(t).toString(),t).mul(n).toString(),o=Object(u["formatEther"])(a),s=d["a"].BigNumber.from(o.split(".")[0]),i=Object(u["formatUnits"])(s,r);return i},USDT2Underlying:function(e,t,n){if(!isNaN(e)){var r=10,a=Object(u["parseUnits"])(parseFloat(e).toFixed(r),r),o=Object(u["parseUnits"])(a.toString(),18),s=Object(u["formatUnits"])(o.div(t).toString(),n);return s}},hideConfirmModal:function(){this.confvisible=!1},getBalanceOf:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.record.contractObj.balanceOf(e.walletAddress);case 2:n=t.sent,e.record.balanceOf=d["a"].utils.formatUnits(n,e.decimals);case 4:case"end":return t.stop()}}),t)})))()},showModalDR:function(e,t){this.opType="depOrRedeem",this.visible=!0,this.record=t},showModalBR:function(e,t){this.opType="borrowAndRepay",this.visible=!0,this.record=t},collateral:function(e,t){this.comptrollerObj.enterMarkets([t.address]).then((function(e){}))},onChange:function(e,t){e?this.comptrollerObj.enterMarkets([t.address]).then((function(e){})).catch((function(e){})):this.comptrollerObj.exitMarket(t.address).then((function(e){})).catch((function(e){}))},handleOk:function(e){var t=this;this.ModalText="The modal will be closed after two seconds"+e,this.confirmLoading=!0,setTimeout((function(){t.visible=!1,t.confirmLoading=!1}),2e3)},handleCancel:function(e){this.visible=!1},expandIcon:function(e){var t=this.$createElement;return t("span",{style:"margin-right:0px"},[t("a-icon",{attrs:{type:"down-circle"}})])}},beforeDestroy:function(){clearInterval(this.timer)}},y=f,w=(n("cc3e"),n("0c7c")),g=Object(w["a"])(y,r,a,!1,null,"4f187b03",null);t["default"]=g.exports},cc3e:function(e,t,n){"use strict";var r=n("18a5"),a=n.n(r);a.a},d58f:function(e,t,n){var r=n("1c0b"),a=n("7b0b"),o=n("44ad"),s=n("50c4"),i=function(e){return function(t,n,i,c){r(n);var l=a(t),d=o(l),u=s(l.length),p=e?u-1:0,_=e?-1:1;if(i<2)while(1){if(p in d){c=d[p],p+=_;break}if(p+=_,e?p<0:u<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:u>p;p+=_)p in d&&(c=n(c,d[p],p,l));return c}};e.exports={left:i(!1),right:i(!0)}}}]);